{% extends 'base.html.twig' %}

{% block title %}Sales{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h2>Total Sales</h2>
    {% if totalSales %}
        Users: <b>{{ totalSales.users }}</b> 
        Buyers: <b>{{ totalSales.buyers }}</b> 
        Orders: <b>{{ totalSales.orders }}</b> 
        Products: <b>{{ totalSales.products }}</b> 
        Income: <b>{{ totalSales.income|format_currency('USD', {fraction_digit: 0}) }}</b>
    {% endif %}
    
    <h2>Sales</h2>
    <table>
        <tr>
            <th align="left">Id</th>
            <th align="left">Firstname</th>
            <th align="left">Lastname</th>
            <th align="left">Email</th>
            <th align="left">Orders</th>
            <th align="left">Products</th>
            <th align="left">Income</th>
        </tr>
        {% for item in sales %}
            <tr>
                <td>{{ item.user.id }}</td>
                <td>{{ item.user.firstname }}</td>
                <td>{{ item.user.lastname }}</td>
                <td>{{ item.user.email }}</td>
                <td>{{ item.order.count }}</td>
                <td>{{ item.product.count }}</td>
                <td>{{ item.order.sum|format_currency('USD', {fraction_digit: 0}) }}</td>
            </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}
